<!--
-*- coding: utf-8 -*-
SPDX-FileCopyrightText: PyPSA-SPICE Developers
SPDX-License-Identifier: GPL-2.0-or-later
-->

# PyPSA-SPICE-Vis: Visualisation tool for PyPSA-SPICE Model Builder

PyPSA-SPICE-Vis is an open-source tool designed to simplify the visualization and comparison of outputs generated by the PyPSA-SPICE model builder. It allows users to view and compare charts from post-analysis of multiple scenarios directly within a single webpage. As PyPSA-SPICE-Vis is built to work with the PyPSA-SPICE model builder, having the PyPSA-SPICE model builder is a prerequisite for using this tool.

## How to use it

### Create initial.yaml

The pypsa-spice-vis folder and its files should be inside the PyPSA-SPICE repository by default. The first step is to enter the pypsa-spice-vis folder and create an `initial.yaml` in the `setting` folder to provide initial settings for the app. This file will be ignored by git and is exclusive to your computer. You can refer to `pypsa-spice-vis/setting/initial_project_01.yaml` as an example, or copy the example file directly:

```bash title="Copying the initial.yaml file"
cp pypsa-spice-vis/setting/initial_project_01.yaml pypsa-spice-vis/setting/initial.yaml
```

Structure of the `initial.yaml` is explained as follows:

```yaml title="Explanation of initial.yaml"
project: "project_01" #(1)!
sce1: "ref" # (2)!
sce2: "opt" #(3)!
```

1. Mandatory input project name. This name is the same as `project_name` from `pypsa-spice/config.yaml`.
2. Mandatory input name of the first scenario ( the name is usually `ref` from the `output_scenario_name` in `pypsa-spice/config.yaml`).
3. Optional input name of the first scenario ( the name is usually other scenarios from the `output_scenario_name`  in `pypsa-spice/config.yaml`).

### Run streamlit app

You can run streamlit app with the command below:

=== "Current path in `pypsa-spice/`"

    ```bash
    streamlit run pypsa-spice-vis/main.py
    ```

=== "Current path in `pypsa-spice/pypsa-spice-vis/`"

    ```bash
    streamlit run main.py
    ```

After running, you will be able to see a local web link/url in the terminal. Simply open the link/url in your browser and you will be able to see the visualisations.

## What charts are displayed in the tool by default

The available charts and sections are listed in [List of charts and sections](../visualisation-tool/vis-sections-and-charts.md) which you will be able to see all of them in the browser if your model include all sectors (power+industry+transport).

## Deploy your visualistaion results to the web

You can review the visualisation in the localhost or deploy them into the webpage. More details are described in [deployment](../visualisation-tool/deployment.md)
